{"ts":1349897659758,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1349897684197,"patch":[[{"diffs":[[1,"<html>\r\n<head>\r\n<title>Cloud9, NodeJS & Heroku: websockets for all</title>\r\n\r\n<script src=\"/socket.io/socket.io.js\"></script>\r\n\r\n<script>\r\nonerror = function (msg) {\r\nlog(msg);\r\n }\r\n function log(msg) {\r\n document.getElementById('log').appendChild(document.createTextNode(new Date() + ' ' + msg + '\\n'));\r\n }\r\n function status(msg) {\r\n log(msg);\r\n document.getElementById('status').textContent = msg;\r\n }\r\n function clearLog() {\r\n var e = document.getElementById('log');\r\n while (e.hasChildNodes()) {\r\n e.removeChild(e.firstChild);\r\n }\r\n e.appendChild(document.createTextNode('Log: \\n'));\r\n }\r\n</script>\r\n\r\n<script>\r\n var socket = null;\r\n function connect() {\r\n log('Connecting to local server...');\r\n if (socket == null) {\r\n socket = io.connect(null,{'auto connect': false});\r\n socket.on('connect', function () {\r\n status('Connected');\r\n });\r\n\r\n socket.on('message', function (data) {\r\n log(data);\r\n });\r\n }\r\n socket.socket.connect();\r\n }\r\n\r\n function send() {\r\n if (socket && socket.socket.connected) {\r\nsocket.send(document.getElementById('text').value);\r\n log('>' + document.getElementById('text').value);\r\n } else {\r\n log('Not connected.');\r\n }\r\n }\r\n\r\n function send100() {\r\n if (socket && socket.socket.connected) {\r\nfor (var i = 0; i < 100; i += 1) {\r\nsocket.send('test'+ i);\r\nlog('> test' + i);\r\n }\r\n } else {\r\n log('Not connected.');\r\n }\r\n }\r\n\r\n function update() {\r\n if (socket && socket.socket && socket.socket.transport) {\r\ndocument.getElementById('sessionId').textContent = socket.socket.transport.sessid;\r\n document.getElementById('transport').textContent = socket.socket.transport.name;\r\n } else {\r\n document.getElementById('sessionId').textContent = '-';\r\n document.getElementById('transport').textContent = '-';\r\n }\r\n }\r\n setInterval(update, 10);\r\n\r\n</script>\r\n</head>\r\n\r\n<body onload=\"connect()\">\r\n<p>\r\n<label style='width:200px;float:left'>Status: <span id=\"status\">Idle</span></label>\r\n</p>\r\n<p>SessionId: <span id=\"sessionId\">-</span></p>\r\n<p>Transport: <span id=\"transport\">-</span></p>\r\n\r\n<p>\r\n<label>Message: <input id=\"text\" type=\"text\" size=\"80\" value=\"\"/></label>\r\n<input type=button value=\"Echo\" onclick=\"send()\">\r\n</p>\r\n\r\n<p>\r\n<input type=button value=\"Spam 100 packets\" onclick=\"send100()\" />\r\n<input type=button value=\"Clear log\" onclick=\"clearLog()\" />\r\n</p>\r\n\r\n<pre id=\"log\">Log:</pre>\r\n</body>\r\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":2336}]],"length":2336,"saved":false}
